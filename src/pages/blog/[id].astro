---
import { type NewsPost } from "@types/type";
import { getContents, getContentByID } from "@lib/microcms";

import Layout from "@layouts/Layout.astro";
import Article from "@components/parts/Article.astro";

// 詳細記事ページの全パスを取得
export async function getStaticPaths() {
  const response = await getContents("blog");
  return response.map((content: any) => ({
    params: {
      id: content.id,
    },
  }));
}

//記事の詳細情報を取得
const { id } = Astro.params;
const post = await getContentByID("blog", id as string);
---

<Layout title="My first blog with Astro">
  <!-- 型安全性のため、postの型を明示的に定義しておく -->
  <Article type="blog" article={post as NewsPost} />
</Layout>
